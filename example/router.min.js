var GoldenRoute=function(){function t(t){for(var e=t.split("?"),r=e[0].replace(/[\\\/]+/g,"/"),a=null,o={},u=0;u<n.length&&!a;u++){var i=r.match(n[u].pattern);if(i){a=n[u];for(var u=0;u<a.params.length;u++)o[a.params[u]]=decodeURIComponent(i[u+1])}}if(a){var c={};if(e[1]){e=e[1].split("&");for(var u=0;u<e.length;u++){var p=e[u].split("=");p[1]?c[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):c[decodeURIComponent(p[0])]=null}}return{params:o,query:c,route:a}}return null}if(window.history&&window.history.pushState){var e={},n=[];return e.addRoute=function(t,e){var r={},a=t.split("/"),o="^";r.params=[];for(var u=0;u<a.length;u++)0==a[u].indexOf(":")?(r.params.push(a[u].slice(1)),a[u]="([a-zA-Z0-9-_]+)"):a[u]=a[u];o+=a.join("/"),o+="$",r.pattern=new RegExp(o),r.routeFunc=e,n.push(r)},e.start=function(){document.addEventListener("click",function(e){if("A"==e.target.tagName){var n=e.target.getAttribute("href");if(0==n.indexOf("/")){var r=t(n);r&&(r.route.routeFunc(r.params,r.query,function(t){history.pushState(null,t,n),document.title=t}),e.preventDefault())}}},!1),addEventListener("popstate",function(e){var n=t(location.pathname);n?(n.route.routeFunc(n.params,n.query),n.route.routeFunc(n.params,n.query,function(t){document.title=t})):location.reload()})},e}return{addRoute:function(){},start:function(){}}}();